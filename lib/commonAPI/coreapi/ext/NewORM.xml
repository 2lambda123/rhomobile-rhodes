<?xml version = "1.0"?>
<?xml-stylesheet type="text/xsl" href="pb_help.xsl"?>
<API>
    <MODULE name="NewORM" parent="Rho" productException="eb">
        <HELP_OVERVIEW>NewORM CoreAPI module</HELP_OVERVIEW>
        <MORE_HELP>New implementation of the RHOM.
NOTE: BETA VERSION - This API has not been officially released. It should not be used in a production environment.
</MORE_HELP>

        <METHODS>

            <METHOD name="useNewOrm" access="STATIC">
                <DESC>Returns TRUE if NewORM is enabled in rhoconfig.txt.</DESC>
                <RETURN type="BOOLEAN"/>
            </METHOD>

            <METHOD name="getClientId" access="STATIC">
                <DESC>Returns current Client Id.</DESC>
                <RETURN type="STRING"/>
            </METHOD>

            <METHOD name="haveLocalChanges" access="STATIC">
                <DESC>Returns TRUE whenever there are any local (non-synced) changes.</DESC>
                <RETURN type="BOOLEAN"/>
            </METHOD>

            <METHOD name="databaseLocalReset" access="STATIC">
                <DESC>Resets local database.</DESC>
            </METHOD>

            <METHOD name="databaseClientReset" access="STATIC">
                <PARAMS>
                    <PARAM name="resetLocalModels" type="BOOLEAN" default="true">
                        <DESC>Whether or not to reset Local Models.</DESC>
                    </PARAM>
                </PARAMS>
                <DESC>Resets client info and sync models (optionally, local models as well)</DESC>
            </METHOD>

            <METHOD name="databaseFullResetEx" access="STATIC">
                <PARAMS>
                    <PARAM name="models" type="ARRAY">
                        <DESC>List of models to reset.</DESC>
                    </PARAM>
                    <PARAM name="resetClientInfo" type="BOOLEAN">
                        <DESC>Whether or not to reset Client Info.</DESC>
                    </PARAM>
                    <PARAM name="resetLocalModels" type="BOOLEAN">
                        <DESC>Whether or not to reset Local Models.</DESC>
                    </PARAM>
                </PARAMS>
                <DESC>Resets selected models, client info and local models.</DESC>
            </METHOD>

            <METHOD name="databaseFullReset" access="STATIC">
                <PARAMS>
                    <PARAM name="resetClientInfo" type="BOOLEAN" default="false">
                        <CAN_BE_NIL/>
                        <DESC>Whether or not to reset Client Info.</DESC>
                    </PARAM>
                    <PARAM name="resetLocalModels" type="BOOLEAN" default="true">
                        <CAN_BE_NIL/>
                        <DESC>Whether or not to reset Local Models.</DESC>
                    </PARAM>
                </PARAMS>
                <DESC>Resets selected models, client info and local models.</DESC>
            </METHOD>

            <METHOD name="databaseFullResetAndLogout" access="STATIC">
                <DESC>Resets sync models, client info and local models and does the user logout.</DESC>
            </METHOD>

            <METHOD name="databaseFullclientResetAndLogout" access="STATIC">
                <DESC>Resets sync models, client info and local models and does the user logout.</DESC>
            </METHOD>
			<METHOD name="addModel" generateAPI="false">
                <DESC>Creates an ORM model reference.</DESC>
                <APPLIES jsOnly="true"/>
                <PARAMS>
                    <PARAM name="Anoynomous Function methods" type="">
                        <PARAMS>
                            <PARAM name='enable("value")' type='STRING'>
                                <DESC>Enables Model Properties.</DESC>
                                <VALUES>
                                    <VALUE value ="sync">
                                        <DESC>If set then model is set for RhoConnect Sync.</DESC>
                                    </VALUE>
                                    <VALUE value ="propertyBag">
                                        <DESC>(Default) Model will be of type propertyBag.</DESC>
                                    </VALUE>
                                    <VALUE value ="fixedSchema">
                                        <DESC>Model will be of type fixedSchema.</DESC>
                                    </VALUE>
									<VALUE value ="full_update">
                                        <DESC>Instruct ORM to send all attributes to RhoConnect when an object is updated. By Default it is disabled.</DESC>
                                    </VALUE>
									<VALUE value ="pass_through">
                                        <DESC>RhoConnect provides a simple way to keep data out of redis. If you have sensitive data that you do not want saved in redis, add the pass_through option in settings/settings.yml for each source.</DESC>
                                    </VALUE>
                                </VALUES>
                                <CAN_BE_NIL>
                                </CAN_BE_NIL>
                            </PARAM>
                            <PARAM name='setModelproperty("name","type")' type='STRING,STRING'>
                                <DESC>Used to create properties on your model.</DESC>
                                <PARAMS>
                                    <PARAM name="name" type="STRING">
                                        <DESC>The name of the property.</DESC>
                                    </PARAM>
                                    <PARAM name="type" type="STRING">
                                        <DESC>The type of property value: String, Float, integer, Varchar, Blob - String is default.</DESC>
                                    </PARAM>
                                </PARAMS>
                                <CAN_BE_NIL>
                                </CAN_BE_NIL>
                            </PARAM>
							<PARAM name='setProperty(property,value)' type='STRING,VALUE'>
                                <DESC>Set Behavior of this model. Possible `property` options and corresponding values.</DESC>
                                <CAN_BE_NIL>
                                </CAN_BE_NIL>
                                <PARAMS>
                                    <PARAM name="partition" type="STRING">
                                        <DESC>The partition to use for this model. Partitions can be used to segment the data and keep non-synched data separate from synched models. Possible `values`.</DESC>
                                        <VALUES>
                                            <VALUE value ="local">
                                                <DESC>This partition is used automatically if the model is not a sync model.</DESC>
                                            </VALUE>
                                            <VALUE value ="user">
                                                <DESC>This partition is used automatically if the model is a sync model.</DESC>
                                            </VALUE>
											<VALUE value ="app">
                                                <DESC>This partition is used to store the application related information.</DESC>
                                            </VALUE>
                                        </VALUES>
                                    </PARAM>
                                    <PARAM name="sync_type" type="STRING">
                                        <DESC>Sets the type of sync it will be. </DESC>
                                        <VALUES>
                                            <VALUE value ="none">
                                                <DESC>If data model is not a sync model.</DESC>
                                            </VALUE>
                                            <VALUE value ="incremental">
                                                <DESC>Used when the data model is a sync model. Just syncs changes.</DESC>
                                            </VALUE>
					    <VALUE value ="bulk_only">
                                                <DESC>If the model is used only for bulk sync.</DESC>
                                            </VALUE>
                                        </VALUES>
                                    </PARAM>
                                    <PARAM name="sync_priority" type="INTEGER">
                                        <DESC>This number determines the order in which the models are processed and synchronised. Priority starts from lower value 1. Lower the number, higher is the priority. Default value is 1000. </DESC>
                                    </PARAM>
                                </PARAMS>
                            </PARAM>
                        </PARAMS>
                    </PARAM>
                </PARAMS>
                <RETURN type="Model"/>
            </METHOD>
            <METHOD name="generateId" access="STATIC">
                <DESC>Returns newly generated unique object Id.</DESC>
                <RETURN type="INTEGER"/>    
            </METHOD>
				
        </METHODS>

        <USER_OVERVIEW>
        </USER_OVERVIEW>

        <VER_INTRODUCED>1.0.0</VER_INTRODUCED>
        <PLATFORM>
         </PLATFORM>
    </MODULE>
</API>
