QT -= core

DEFINES += OS_SAILFISH OS_LINUX

TARGET = unzip
TEMPLATE = lib

CONFIG += staticlib warn_on
CONFIG += <%= @buildMode %>

INCLUDEPATH += <%= @rhoRoot %>/platform/shared\
<%= @rhoRoot %>/platform/shared/ruby\
<%= @rhoRoot %>/lib/commonAPI

unix:!macx {
  DESTDIR = $$PWD/bin
  OBJECTS_DIR = $$PWD/bin/tmp
  INCLUDEPATH += <%= @rhoRoot %>/platform/shared/curl/include
  DEFINES += _GNU_SOURCE
  
  QMAKE_CFLAGS += -fvisibility=hidden
  QMAKE_CXXFLAGS += -fvisibility=hidden
  QMAKE_CFLAGS_DEBUG -= -O2
  QMAKE_CXXFLAGS_DEBUG -= -O2
}

DEFINES += RHODES_QT_PLATFORM

!win32 {
  QMAKE_CFLAGS_WARN_ON += -Wno-extra -Wno-unused -Wno-sign-compare -Wno-format -Wno-parentheses
  QMAKE_CXXFLAGS_WARN_ON += -Wno-extra -Wno-unused -Wno-sign-compare -Wno-format -Wno-parentheses
  # QMAKE_CFLAGS += -fvisibility=hidden
  # QMAKE_CXXFLAGS += -fvisibility=hidden
}

HEADERS += <%= @rhoRoot %>/platform/shared/unzip/zip.h\
<%= @rhoRoot %>/platform/shared/unzip/unzip.h\
<%= @rhoRoot %>/platform/shared/unzip/gunzip.h\
<%= @rhoRoot %>/platform/shared/unzip/crc32.h\
<%= @rhoRoot %>/platform/shared/unzip/deflate.h\
<%= @rhoRoot %>/platform/shared/unzip/inffast.h\
<%= @rhoRoot %>/platform/shared/unzip/inffixed.h\
<%= @rhoRoot %>/platform/shared/unzip/inflate.h\
<%= @rhoRoot %>/platform/shared/unzip/gzguts.h\
<%= @rhoRoot %>/platform/shared/unzip/inftrees.h\
<%= @rhoRoot %>/platform/shared/unzip/trees.h\
<%= @rhoRoot %>/platform/shared/unzip/unzip.h\
<%= @rhoRoot %>/platform/shared/unzip/zconf.h\
<%= @rhoRoot %>/platform/shared/unzip/zip.h\
<%= @rhoRoot %>/platform/shared/unzip/zlib.h\
<%= @rhoRoot %>/platform/shared/unzip/zutil.h

SOURCES += <%= @rhoRoot %>/platform/shared/unzip/unzip.cpp\
<%= @rhoRoot %>/platform/shared/unzip/adler32.cpp\
<%= @rhoRoot %>/platform/shared/unzip/crc32.cpp\
<%= @rhoRoot %>/platform/shared/unzip/deflate.cpp\
<%= @rhoRoot %>/platform/shared/unzip/gunzip.cpp\
<%= @rhoRoot %>/platform/shared/unzip/gzclose.cpp\
<%= @rhoRoot %>/platform/shared/unzip/gzlib.cpp\
<%= @rhoRoot %>/platform/shared/unzip/gzread.cpp\
<%= @rhoRoot %>/platform/shared/unzip/gzwrite.cpp\
<%= @rhoRoot %>/platform/shared/unzip/infback.cpp\
<%= @rhoRoot %>/platform/shared/unzip/inffast.cpp\
<%= @rhoRoot %>/platform/shared/unzip/inflate.cpp\
<%= @rhoRoot %>/platform/shared/unzip/inftrees.cpp\
<%= @rhoRoot %>/platform/shared/unzip/trees.cpp\
<%= @rhoRoot %>/platform/shared/unzip/unzip.cpp\
<%= @rhoRoot %>/platform/shared/unzip/zip.cpp\
<%= @rhoRoot %>/platform/shared/unzip/zutil.cpp
